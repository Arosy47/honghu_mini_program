

<view class="testmaoboli" style="height: 300px; z-index: 2;" />

<view id="top-trigger" class="bg-image">

  <image class="blur" src="{{'https://' + bgPicture}}" mode="widthFix" />

  <view style="position: fixed; top:0; z-index: 10; width: 100%;">
    <view wx:if="{{showNavigate}}" class="testmaoboli" style="height: {{navHeight}}px; z-index: 6; width: 100%;" />
    <view class="bg-image-top" style="height:{{navHeight}}px;  width: 100%;">
      <image class="blur" style="{{showNavigate?'':'visibility:hidden'}}" src="{{'https://' + bgPicture}}" mode="top" />
    
      <view class="search" style="height:{{navHeight}}px;padding-top:{{navTop}}px; position: absolute; z-index: 7;">
        <view class="search-title" bind:tap="back"
          style="height:{{navHeight-navTop-5}}px;line-height:{{navHeight-navTop-5}}px; display: flex; align-items: center; justify-content: space-around;">
          
          <text wx:if="{{shareUserId}}" class="cuIcon-homefill text-white" ></text>
          <text wx:else class="cuIcon-back text-white" ></text>
          <text class="text-white" style="font-weight: normal;" wx:if="{{showNavigate}}" >{{labelName}}</text>
        </view>

      </view>
    </view>
  </view>

  <view class="text-content" style="z-index: 4;">
    
    <view class="flex" style="align-items: center; margin-top: 30rpx;">
    
      <view class="padding-lr">
        <image mode="aspectFill" class="cu-avatar" style="border-radius: 20rpx; width: 113rpx;height: 113rpx;" src="{{'https://' + bgPicture}}" data-img="{{'https://' + bgPicture}}" catchtap="previewImage" />  
      </view>
      <text style="font-size: 40rpx; margin-left: 0rpx;">{{labelName}}</text>
    </view>

    <view class="margin-lr margin-tb-sm" style="font-size: 25rpx;">{{articleNum}}篇内容</view>

    <view class="margin-lr margin-tb-sm"  style="font-size: 25rpx;">{{introduction}}</view>

    <view style="margin-bottom: 20rpx;">
      <text class="signature whitecolor">{{user.motto ? user.motto : defaultSignature}}</text>
    </view>

  </view>
</view>

<view style="z-index: -1 !important;">

  <view class="tab-container" style="position: sticky; top:{{navHeight}}px; z-index: 10;">
    <view class="tab-item {{order=='time'?'active':''}}" data-index="time" bind:tap="switchTab">时间</view>

    <view class="tab-item {{order=='hot'?'active':''}}" data-index="hot" bind:tap="switchTab">热度</view>

  </view>

  <view wx:if="{{initLoading}}" style="position: absolute; top:600rpx; left:300rpx; z-index: 100;">
    <view class="cu-load loading text-gray" style="color: #666;"></view>
  </view>

  <view class="container">

    <view wx:for="{{topics}}" id="{{'selection-'+groupIndex}}" wx:for-item="list"  wx:for-index="groupIndex"  wx:key="groupIndex">
      <view wx:if="{{styleMap[groupIndex].visible}}" class="">
        <view wx:for="{{list}}" wx:for-item="item" id="item-{{item.id}}" wx:key="{{item.id}}" >
          <topic-item wx:if="{{(item.functionType=='NORMAL'||item.functionType=='VOTE'||item.functionType=='SECOND_HAND_MARKET'||item.functionType=='LOTTERY')}}" hover topic-item-class="topic-item" topic="{{item}}" isOwner="{{userId === item.userId}}" admin="{{item.admin}}" data-group-index="{{groupIndex}}" data-index="{{index}}" bind:moreIconTap="showActions" bind:commentIconTap="gotoTopicDetail" bind:thumbUpIconTap="onThumbUpTap" 
          bind:collectIconTap="onCollectTap" bind:viewIconTap="gotoTopicDetail"
          bind:dingIconTap="onDingTap"
          bind:tagTap="gotoCategory" bind:shareTab="onShareTab" bind:vote="vote" bind:joinLottery="onJoinLottery"/>
        </view>
      </view>
      <view wx:else style="height:{{styleMap[groupIndex].height}}px" class="selection--show">
        
      </view>
    </view>
  </view>

</view>

<van-action-sheet
  z-index="1025"
  show="{{ actionsShow }}"
  actions="{{ actions }}"
  bind:close="actionClose"
  bind:select="actionSelect"
/>

<van-action-sheet
  z-index="1026"
  show="{{ reportReasonShow }}"
  actions="{{ reportReasonList }}"
  bind:close="reportReasonListClose"
  bind:select="reportReasonSelect"
/>

<view class="btn-edit theme-color-button" style="z-index: 1;" hover-class="highSelectColor" hover-stay-time="700" bindtap="gotoPublish">
  <image class="item-icon" mode="aspectFit" src="/images/svg/plus.png" />
</view>

<view class="btn-search theme-color-button" style="z-index: 1;" hover-class="highSelectColor" hover-stay-time="700" bindtap="onSearchTab">
  <image class="item-icon" style="height: 50rpx;" mode="aspectFit" src="/images/search.png" />
</view>

<view wx:if="{{order=='time'}}">
  <l-loadmore l-class="loading" show="{{!initLoading&&loading}}" type="loading" loading-text="正在加载中..." line />
  <l-loadmore l-class="loading" show="{{!nodata&&!initLoading&&!timeHasMore && !loading}}" type="end" end-text="已经到底了" line />

  <nothing wx:if="{{nodata}}" pic="../../images/icon_nothing/pic_topic.png" tip="空空如也" />

</view>

<view wx:else>
  <l-loadmore l-class="loading" show="{{!initLoading&&loading}}" type="loading" loading-text="正在加载中..." line />
  <l-loadmore l-class="loading" show="{{!nodata&&!initLoading&&!hotHasMore&&!loading }}" type="end" end-text="已经到底了" line />

  <nothing wx:if="{{nodata}}" pic="../../images/icon_nothing/pic_topic.png" tip="空空如也" />

</view>

<view class="bottom-adapt" style="height: 200rpx;" ></view>

<view class="page-bottom-blur"></view>
<view class="page-bottom-background"></view>