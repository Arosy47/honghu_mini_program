

<cu-custom bgColor="theme-color" isBack="{{true}}">
  <view slot="content">评论列表</view>
</cu-custom>

<import src="/templates/nodata.wxml" />

<view wx:if="{{initLoading}}">
  <view class="cu-load loading text-gray" style="color: #666;"></view>
</view>

<view wx:for="{{commentList}}" id="{{'selection-'+groupIndex}}" wx:for-item="list"  wx:for-index="groupIndex"  wx:key="groupIndex" >
  <view wx:if="{{styleMap[groupIndex].visible}}" class="">
    <view wx:for="{{list}}" wx:for-item="item" id="item-{{item.id}}" wx:key="{{item.id}}">
      <view hover-class="highSelectColor" style="display: flex; justify-content: space-between; align-items: center; padding-left: 40rpx;padding-right: 20rpx; height: 240rpx; background-color: white;" data-group-index="{{groupIndex}}" data-index="{{index}}" bind:tap="gotoArticleDetail">
        <view wx:if="{{item.imgUrl}}" style="display:flex; flex-direction: column; justify-content: flex-start; height: 230rpx; width: 70%; position: relative;">
          <view wx:if="{{item.parentCommentId!=0}}" style="color: gray;">回复<text style="color: #576b95; font-weight: bold;">{{item.toUserNickName}}</text>评论</view>
          <view wx:else style="color: gray; ">发表评论</view>

          <image class="image column-one" style="height: 100rpx; width: 100rpx;"  src="https://{{item.imgUrl.url}}!article_small" mode="aspectFill"></image>
          
          <text wx:if="{{item.content}}" class="content-text-one-line">{{item.content}}</text>

          <text class="time" style="position: absolute;bottom: 0rpx;">{{item.createTime}}</text>
        </view>

        <view wx:else style="display:flex; flex-direction: column; justify-content: flex-start; height: 170rpx; width: 70%; position: relative;">
          <view wx:if="{{item.parentCommentId!=0}}" style="color: gray;">回复<text style="color: #576b95; font-weight: bold;">{{item.toUserNickName}}</text>评论</view>
          <view wx:else style="color: gray;">发表评论</view>
          
          <text class="content-text-two-line">{{item.content}}</text>

          <text class="time" style="position: absolute;bottom: 0rpx;">{{item.createTime}}</text>
        </view>

        <view>
          <view wx:if="{{item.originArticleImgUrl}}" style="overflow: hidden; display: flex; align-items: center; border-radius: 30rpx;">
            <image class="life-img" style="height: 170rpx; width: 170rpx; " mode="aspectFill" src="{{'https://'+item.originArticleImgUrl+'!article_small'}}" >
            </image>
          </view>

          <view wx:else class="card-content" >
            <text class="content-text content-text-three-line" style="text-align: center; color: rgb(168, 166, 166); font-size: 24rpx;">{{item.originArticleContent}}</text>
          </view>
        </view>
      </view>
      <view class="l1"></view>
    </view>
  </view>
  <view wx:else style="height:{{styleMap[groupIndex].height}}px" class="selection--show">
  </view>
</view>

<l-loadmore l-class="loading" show="{{!initLoading&&loading}}" type="loading" loading-text="正在加载中..." line />
<l-loadmore l-class="loading" show="{{!nodata&&!initLoading&&!hasMore && !loading}}" type="end" end-text="已经到底了" line />

<view class="bottom-adapt" style="height: 100rpx;"></view>

<nothing wx:if="{{nodata}}" pic="../../images/icon_nothing/pic_topic.png" tip="暂时没有评论" />

